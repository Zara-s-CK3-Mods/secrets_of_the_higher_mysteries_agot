
namespace = zz_valyria_magic_blood_magic


## Replication
zz_valyria_magic_blood_magic.0003 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic.0003.t
	desc = zz_valyria_magic_blood_magic.0003.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	right_portrait = {
		character = scope:character_clone
	}


	#NAMING WIDGET
	widget = {
		gui = "event_window_widget_name_child"
		container = "dynamic_birth_name"
		controller = name_character
		setup_scope = { scope:character_clone = { save_scope_as = name_character_target } }
	}

	option = {
		name = zz_valyria_magic_blood_magic.0003.opt.a
	}
}

### zz_blood_magic_spells_option

namespace = zz_valyria_magic_blood_magic_spells

zz_valyria_magic_blood_magic_spells.001 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.001.t
	desc = zz_valyria_magic_blood_magic_spells.001.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.a
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_01
			}
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.002 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.002.t
	desc = zz_valyria_magic_blood_magic_spells.002.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_traits
		remove_variable = selected_trait
		trait:intellect_good_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
				if = {
					limit = {
						NOT = { has_variable = selected_trait }
					}
					set_variable = { name = selected_trait value = prev }
				}
			}
		}
		trait:physique_good_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:beauty_good_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:magic_blood_good_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:lifespan_good_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}

		trait:pure_blooded = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:fecund = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:strong = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:shrewd = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:disease_resistance_alchemical = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:dull = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:intellect_bad_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:physique_bad_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:beauty_bad_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:magic_blood_bad_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:lifespan_bad_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:infertile = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:weak = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:dwarf = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:giant = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:inbred = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:impotent = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:spindly = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:scaly = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:albino = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:wheezing = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:bleeder = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:hunchbacked = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:clubfooted = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:lisping = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:stuttering = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		
	}

	widget = {
		is_shown = {
		}
		gui = "event_window_trait_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.a
		trigger = { 
		}
		hidden_effect = {
			var:selected_trait ?= {
				save_scope_as = trait 
			}
	
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_02
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.003 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.003.t
	desc = zz_valyria_magic_blood_magic_spells.003.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_regiments
		remove_variable = selected_regiment
		scope:recipient = {
			every_maa_regiment = {
				limit = {
					maa_current_troops_count < maa_max_troops_count
				}
				root = {
					add_to_variable_list = {
						name = possible_regiments
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_regiment }
						}
						set_variable = { name = selected_regiment value = prev }
					}
				}
			}
		}

	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_regiments
					count > 0
				}
			}
		}
		gui = "event_window_maa_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.003.opt.a
		trigger = {
			scope:recipient = {
				any_maa_regiment = {
					maa_current_troops_count < maa_max_troops_count
				}
			}

		}
		hidden_effect = {
			var:selected_regiment ?= { 
				save_scope_as = target
			}
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_03
			}
		}

	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.003.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.004 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.004.t
	desc = zz_valyria_magic_blood_magic_spells.004.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = {
		character = scope:recipient
	}

	immediate = {
		zz_valyria_dead_dragon_egg_list = yes

	}
	widget = {
		is_shown = {
			scope:recipient = {
				has_raised_armies = yes
			}
		}
		gui = "event_window_army_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.004.opt.a
		trigger = {
			scope:recipient = {
				has_raised_armies = yes
			}
		}
		hidden_effect = {
			var:selected_army ?= { 
				save_scope_as = target
			}
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_04
			}
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.003.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.005 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.005.t
	desc = zz_valyria_magic_blood_magic_spells.005.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = zz_valyria_possible_artifacts
		remove_variable = zz_valyria_selected_artifact
		every_character_artifact = {
			limit = {
				has_variable = dragon_egg
				has_variable = dud_egg
				NOT = { has_variable = cradled_egg }
				#NOT = { has_variable = dud_egg }
				NOT = { has_variable = pitted_egg }
			}
			root = {
				add_to_variable_list = {
					name = zz_valyria_possible_artifacts
					target = prev
				}
				if = {
					limit = {
						NOT = { has_variable = zz_valyria_selected_artifact}
					}
					set_variable = { name = zz_valyria_selected_artifact value = prev }
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_artifact_selection_tall"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.a
		hidden_effect = {
			var:zz_valyria_selected_artifact?= { 
				save_scope_as = target
			}
			trigger_event = zz_valyria_magic_blood_magic_spells.00501
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.00501 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.005.t
	desc = zz_valyria_magic_blood_magic_spells.005.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_family_member_even_if_dead_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = zz_valyria_possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_five_options"
		container = "custom_widgets_container"
	}
	

	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			var:zz_valyria_selected_character ?= { 
				save_scope_as = target_char
			}
			save_scope_value_as = {
				name = option_01
				value = yes 
			} 
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_05
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.b
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			var:zz_valyria_selected_character ?= { 
				save_scope_as = target_char
			}
			
			save_scope_value_as = {
				name = option_02
				value = yes 
			} 
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_05
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.c
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			var:zz_valyria_selected_character ?= { 
				save_scope_as = target_char
			}
			save_scope_value_as = {
				name = option_03
				value = yes 
			} 
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_05
			}
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.006 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.006.t
	desc = zz_valyria_magic_blood_magic_spells.006.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	immediate = {
		zz_valyria_dead_dragon_egg_list = yes

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_artifact_selection_tall"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.006.opt.a
		trigger = {
			scope:recipient = {
				any_character_artifact = {
					has_variable = dragon_egg
					has_variable = dud_egg 
					NOT = { has_variable = cradled_egg }
					NOT = { has_variable = pitted_egg }
				}
			}
		}
		hidden_effect = {
			var:zz_valyria_selected_artifact?= { 
				save_scope_as = target
			}
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_06
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.006.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.007 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.007.t
	desc = zz_valyria_magic_blood_magic_spells.007.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.007.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_07
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.008 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.008.t
	desc = zz_valyria_magic_blood_magic_spells.008.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.008.opt.a
		trigger = {
			scope:recipient = {
				has_trait = dragon
				is_female = yes
				NOT = { 
					has_character_flag = zz_valyria_magic_blood_magic_08_effect_flag
				}
			}
		}
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_08
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.008.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.009 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.009.t
	desc = zz_valyria_magic_blood_magic_spells.009.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.009.opt.a
		trigger = {
			scope:recipient = {
				has_trait = dragon
			}
		}
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_09
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.009.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.010 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.010.t
	desc = zz_valyria_magic_blood_magic_spells.010.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.010.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					agot_is_dragonblood_character = yes
				}
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_10
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.010.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.011 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.011.t
	desc = zz_valyria_magic_blood_magic_spells.011.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.011.opt.a
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_11
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.011.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.012 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.012.t
	desc = zz_valyria_magic_blood_magic_spells.012.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.012.opt.a
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_12
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.012.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.013 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.013.t
	desc = zz_valyria_magic_blood_magic_spells.013.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.013.opt.a
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_13
			}
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.013.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.014 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.014.t
	desc = zz_valyria_magic_blood_magic_spells.014.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.014.opt.a
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_14
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.014.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.015 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.015.t
	desc = zz_valyria_magic_blood_magic_spells.015.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.015.opt.a
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_15
			}
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.015.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.016 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.016.t
	desc = zz_valyria_magic_blood_magic_spells.016.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_armies
		remove_variable = selected_army
		scope:recipient = {
			every_army = {
				root = {
					add_to_variable_list = {
						name = possible_armies
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_army }
						}
						set_variable = { name = selected_army value = prev }
					}
				}
			}
		}

	}
	widget = {
		is_shown = {
			scope:recipient = {
				has_raised_armies = yes
			}
		}
		gui = "event_window_army_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.016.opt.a
		hidden_effect = {
			var:selected_army = {
				save_scope_as = target 
			}
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_16
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.016.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.017 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.017.t
	desc = zz_valyria_magic_blood_magic_spells.017.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.017.opt.a
		hidden_effect = {
			save_scope_value_as = {
				name = option_01
				value = yes 
			} 
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_17
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.017.opt.a
		hidden_effect = {
			save_scope_value_as = {
				name = option_02
				value = yes 
			} 
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_17
			}
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.017.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.018 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.018.t
	desc = zz_valyria_magic_blood_magic_spells.018.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_traits
		remove_variable = selected_trait
		trait:dragon_physique_good_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
				if = {
					limit = {
						NOT = { has_variable = selected_trait }
					}
					set_variable = { name = selected_trait value = prev }
				}
			}
		}
		trait:dragon_majestic = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:dragon_swift = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:dragon_physique_bad_3 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:dragon_slow = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}

		trait:dragon_ugly = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:dragon_spindly = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:dragon_fertile = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}

		
		
	}

	widget = {
		is_shown = {
		}
		gui = "event_window_trait_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.a
		trigger = { 
		}
		hidden_effect = {
			var:selected_trait ?= {
				save_scope_as = trait 
			}
	
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_18
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.019 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.019.t
	desc = zz_valyria_magic_blood_magic_spells.019.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.019.opt.a
		hidden_effect = {
			save_scope_value_as = {
				name = option_01
				value = yes 
			} 
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_19
			}
		}		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.019.opt.b
		hidden_effect = {
			save_scope_value_as = {
				name = option_02
				value = yes 
			} 
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_19
			}
		}
		

		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.015.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.020 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.020.t
	desc = zz_valyria_magic_blood_magic_spells.020.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.020.opt.a
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_20
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.020.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.021 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.021.t
	desc = zz_valyria_magic_blood_magic_spells.021.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.021.opt.a
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_21
			}
		}
		
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.021.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.022 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	immediate = {
		zz_valyria_living_dragon_egg_list = yes

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_artifact_selection_tall"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		trigger = {
		}
		hidden_effect = {
			var:zz_valyria_selected_artifact?= { 
				save_scope_as = target
			}
			trigger_event = zz_valyria_magic_blood_magic_spells.02201
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.02201 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = zz_valyria_possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_five_options"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		hidden_effect = {
			var:zz_valyria_selected_character = {
				save_scope_as = target_char_01
			}
			trigger_event = zz_valyria_magic_blood_magic_spells.02202
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02202 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = zz_valyria_possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_five_options"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		hidden_effect = {
			var:zz_valyria_selected_character = {
				save_scope_as = target_char_02
			}
			trigger_event = zz_valyria_magic_blood_magic_spells.02203
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02203 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = zz_valyria_possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_five_options"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		hidden_effect = {
			var:zz_valyria_selected_character = {
				save_scope_as = target_char_03
			}
			trigger_event = zz_valyria_magic_blood_magic_spells.02204
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02204 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = zz_valyria_possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_five_options"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		hidden_effect = {
			var:zz_valyria_selected_character = {
				save_scope_as = target_char_04
			}
			trigger_event = zz_valyria_magic_blood_magic_spells.02205
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02205 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = zz_valyria_possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_five_options"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		hidden_effect = {
			var:zz_valyria_selected_character = {
				save_scope_as = target_char_05
			}
			trigger_event = zz_valyria_magic_blood_magic_spells.02206
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02206 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = zz_valyria_possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_five_options"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		hidden_effect = {
			var:zz_valyria_selected_character = {
				save_scope_as = target_char_06
			}
			trigger_event = zz_valyria_magic_blood_magic_spells.02207
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02207 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = zz_valyria_possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_five_options"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		hidden_effect = {
			var:zz_valyria_selected_character = {
				save_scope_as = target_char_07
			}
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_22
			}
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.023 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.023.t
	desc = zz_valyria_magic_blood_magic_spells.023.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.023.opt.a
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_23
			}
		}
		
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.023.opt.z
	}
}


zz_valyria_magic_blood_magic_spells.024 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.024.t
	desc = zz_valyria_magic_blood_magic_spells.024.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.024.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_24
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.025 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.025.t
	desc = zz_valyria_magic_blood_magic_spells.025.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.025.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_25
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.026 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.026.t
	desc = zz_valyria_magic_blood_magic_spells.026.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.026.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_26
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.027 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.027.t
	desc = zz_valyria_magic_blood_magic_spells.027.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.027.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_27
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.028 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.028.t
	desc = zz_valyria_magic_blood_magic_spells.028.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.028.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_28
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.029 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.029.t
	desc = zz_valyria_magic_blood_magic_spells.029.desc
	theme = university 
	override_background = {
		reference = zz_blood_magic
	}
	left_portrait = root
	lower_center_portrait = {
		character = scope:secondary_recipient
	}
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.029.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		hidden_effect = {
			zz_valyria_magic_cast_effect = { 
				SKILL = blood_magic
				SPELL = zz_valyria_magic_blood_magic_29
			}
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.z
	}
}




