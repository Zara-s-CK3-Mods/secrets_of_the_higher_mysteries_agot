

zz_valyria_create_vs_sword_effect = {
	$OWNER$ = {
		save_scope_as = owner
	}
	var:zz_sword_selection_sword = { 
		save_scope_as = zz_sword_selection_sword
	}
	set_artifact_rarity_illustrious = yes
	if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_01
		}
		create_artifact = {
			name = vs_valyrian_armingsword_silver_name
			visuals = vs_valyrian_armingsword_silver_visuals
			description = vs_valyrian_armingsword_silver_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_valyrian_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
			set_variable = {
				name = valyrian_armingsword_silver_artifact
				value = yes
			}
			save_scope_value_as = {
				name = valyrian_steel
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_02
		}
		create_artifact = {
			name = vs_valyrian_armingsword_gold_name
			visuals = vs_valyrian_armingsword_gold_visuals
			description = vs_valyrian_armingsword_gold_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_valyrian_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
			set_variable = {
				name = valyrian_armingsword_gold_artifact
				value = yes
			}
			save_scope_value_as = {
				name = valyrian_steel
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_03
		}
		create_artifact = {
			name = vs_valyrian_longsword_gold_name
			visuals = vs_valyrian_longsword_gold_visuals
			description = vs_valyrian_longsword_gold_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_valyrian_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
			set_variable = {
				name = valyrian_longsword_gold_artifact
				value = yes
			}
			save_scope_value_as = {
				name = valyrian_steel
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_04
		}
		create_artifact = {
			name = vs_valyrian_longsword_silver_name
			visuals = vs_valyrian_longsword_silver_visuals
			description = vs_valyrian_longsword_silver_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_valyrian_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
			set_variable = {
				name = valyrian_longsword_silver_artifact
				value = yes
			}
			save_scope_value_as = {
				name = valyrian_steel
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_05
		}
		create_artifact = {
			name = vs_blackfyre_name
			visuals = vs_blackfyre_visuals
			description = vs_blackfyre_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_blackfyre_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_06
		}
		create_artifact = {
			name = vs_dark_sister_name
			visuals = vs_dark_sister_visuals
			description = vs_dark_sister_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_dark_sister_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_07
		}
		create_artifact = {
			name = vs_brightroar_name
			visuals = vs_brightroar_visuals
			description = vs_brightroar_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_brightroar_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_08
		}
		create_artifact = {
			name = vs_dawn_name
			visuals = vs_dawn_visuals
			description = vs_dawn_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_valyrian_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_09
		}
		create_artifact = {
			name = vs_cloudbreak_name
			visuals = vs_cloudbreak_visuals
			description = vs_cloudbreak_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_cloudbreak_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_10
		}
		create_artifact = {
			name = vs_adders_fang_name
			visuals = vs_adders_fang_visuals
			description = vs_adders_fang_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_adders_fang_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_11
		}
		create_artifact = {
			name = vs_dancer_name
			visuals = vs_dancer_visuals
			description = vs_dancer_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_dancer_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_12
		}
		create_artifact = {
			name = vs_dark_moon_name
			visuals = vs_dark_moon_visuals
			description = vs_dark_moon_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_dark_moon_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_13
		}
		create_artifact = {
			name = vs_darktalon_name
			visuals = vs_darktalon_visuals
			description = vs_darktalon_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_darktalon_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_14
		}
		create_artifact = {
			name = vs_disputant_name
			visuals = vs_disputant_visuals
			description = vs_disputant_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_disputant_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_15
		}
		create_artifact = {
			name = vs_defiance_name
			visuals = vs_defiance_visuals
			description = vs_defiance_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_defiance_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_16
		}
		create_artifact = {
			name = vs_iron_will_name
			visuals = vs_iron_will_visuals
			description = vs_iron_will_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_iron_will_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_17
		}
		create_artifact = {
			name = vs_heartsbane_name
			visuals = vs_heartsbane_visuals
			description = vs_heartsbane_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_heartsbane_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_18
		}
		create_artifact = {
			name = vs_ice_name
			visuals = vs_ice_visuals
			description = vs_ice_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_ice_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_19
		}
		create_artifact = {
			name = vs_lady_forlorn_name
			visuals = vs_lady_forlorn_visuals
			description = vs_lady_forlorn_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_lady_forlorn_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_20
		}
		create_artifact = {
			name = vs_lamentation_name
			visuals = vs_lamentation_visuals
			description = vs_lamentation_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_lamentation_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_21
		}
		create_artifact = {
			name = vs_longclaw_name
			visuals = vs_longclaw_visuals
			description = vs_longclaw_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_longclaw_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_22
		}
		create_artifact = {
			name = vs_nightfall_name
			visuals = vs_nightfall_visuals
			description = vs_nightfall_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_nightfall_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_23
		}
		create_artifact = {
			name = vs_orphan_maker_name
			visuals = vs_orphan_maker_visuals
			description = vs_orphan_maker_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_orphan_maker_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_24
		}
		create_artifact = {
			name = vs_pincer_name
			visuals = vs_pincer_visuals
			description = vs_pincer_description
			type = axe
			wealth = scope:wealth
			quality = scope:quality
			template = vs_pincer_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_25
		}
		create_artifact = {
			name = vs_pride_name
			visuals = vs_pride_visuals
			description = vs_pride_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_pride_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_26
		}
		create_artifact = {
			name = vs_red_rain_name
			visuals = vs_red_rain_visuals
			description = vs_red_rain_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_red_rain_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_27
		}
		create_artifact = {
			name = vs_remige_name
			visuals = vs_remige_visuals
			description = vs_remige_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_remige_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_28
		}
		create_artifact = {
			name = vs_seafoam_name
			visuals = vs_seafoam_visuals
			description = vs_seafoam_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_seafoam_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_29
		}
		create_artifact = {
			name = vs_skinpeeler_name
			visuals = vs_skinpeeler_visuals
			description = vs_skinpeeler_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_skinpeeler_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_30
		}
		create_artifact = {
			name = vs_skullcleaver_name
			visuals = vs_skullcleaver_visuals
			description = vs_skullcleaver_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_skullcleaver_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_31
		}
		create_artifact = {
			name = vs_stalwart_name
			visuals = vs_stalwart_visuals
			description = vs_stalwart_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_stalwart_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_32
		}
		create_artifact = {
			name = vs_supremacy_name
			visuals = vs_supremacy_visuals
			description = vs_supremacy_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_supremacy_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_33
		}
		create_artifact = {
			name = vs_swordfish_name
			visuals = vs_swordfish_visuals
			description = vs_swordfish_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_swordfish_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_34
		}
		create_artifact = {
			name = vs_tranquility_name
			visuals = vs_tranquility_visuals
			description = vs_tranquility_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_tranquility_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_35
		}
		create_artifact = {
			name = vs_vigilance_name
			visuals = vs_vigilance_visuals
			description = vs_vigilance_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_vigilance_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_36
		}
		create_artifact = {
			name = vs_widestripe_name
			visuals = vs_widestripe_visuals
			description = vs_widestripe_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_widestripe_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_37
		}
		create_artifact = {
			name = vs_widows_wail_name
			visuals = vs_widows_wail_visuals
			description = vs_widows_wail_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_widows_wail_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_38
		}
		create_artifact = {
			name = vs_wyrmfang_name
			visuals = vs_wyrmfang_visuals
			description = vs_wyrmfang_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_wyrmfang_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_39
		}
		create_artifact = {
			name = vs_evergold_name
			visuals = vs_evergold_visuals
			description = vs_evergold_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_evergold_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_40
		}
		create_artifact = {
			name = vs_truth_name
			visuals = vs_truth_visuals
			description = vs_truth_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_truth_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_41
		}
		create_artifact = {
			name = kingsguard_sword_name
			description = kingsguard_sword_description
			visuals = longsword
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_nightfall_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_42
		}
		create_artifact = {
			name = vs_black_death_name
			visuals = vs_black_death_visuals
			description = vs_black_death_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_black_death_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_43
		}
		create_artifact = {
			name = vs_mothers_grief_name
			visuals = vs_mothers_grief_visuals
			description = vs_mothers_grief_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_mothers_grief_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_44
		}
		create_artifact = {
			name = vs_talon_name
			visuals = vs_talon_visuals
			description = vs_talon_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_talon_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_45
		}
		create_artifact = {
			name = vs_glory_name
			visuals = vs_glory_visuals
			description = vs_glory_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_glory_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_46
		}
		create_artifact = {
			name = vs_stormy_nights_name
			visuals = vs_stormy_nights_visuals
			description = vs_stormy_nights_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_stormy_nights_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_47
		}
		create_artifact = {
			name = vs_strangers_touch_name
			visuals = vs_strangers_touch_visuals
			description = vs_strangers_touch_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_strangers_touch_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_48
		}
		create_artifact = {
			name = vs_dragonbane_name
			visuals = vs_dragonbane_visuals
			description = vs_dragonbane_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_dragonbane_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_49
		}
		create_artifact = {
			name = vs_andal_armingsword_gold_name
			visuals = vs_andal_armingsword_gold_visuals
			description = vs_andal_armingsword_gold_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_andal_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_50
		}
		create_artifact = {
			name = vs_andal_armingsword_silver_name
			visuals = vs_andal_armingsword_silver_visuals
			description = vs_andal_armingsword_silver_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_andal_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_51
		}
		create_artifact = {
			name = vs_andal_longsword_gold_name
			visuals = vs_andal_longsword_gold_visuals
			description = vs_andal_longsword_gold_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_andal_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_52
		}
		create_artifact = {
			name = vs_andal_longsword_silver_name
			visuals = vs_andal_longsword_silver_visuals
			description = vs_andal_longsword_silver_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_andal_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_53
		}
		create_artifact = {
			name = vs_firstman_armingsword_gold_name
			visuals = vs_firstman_armingsword_gold_visuals
			description = vs_firstman_armingsword_gold_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_firstman_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_54
		}
		create_artifact = {
			name = vs_firstman_armingsword_silver_name
			visuals = vs_firstman_armingsword_silver_visuals
			description = vs_firstman_armingsword_silver_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_firstman_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_55
		}
		create_artifact = {
			name = vs_firstman_armingsword_bronze_name
			visuals = vs_firstman_armingsword_bronze_visuals
			description = vs_firstman_armingsword_bronze_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_firstman_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_56
		}
		create_artifact = {
			name = vs_firstman_longsword_gold_name
			visuals = vs_firstman_longsword_gold_visuals
			description = vs_firstman_longsword_gold_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_firstman_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_57
		}
		create_artifact = {
			name = vs_firstman_longsword_silver_name
			visuals = vs_firstman_longsword_silver_visuals
			description = vs_firstman_longsword_silver_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_firstman_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}
	else_if = { 
		limit = { 
			scope:zz_sword_selection_sword = trait:zz_valyria_sword_type_58
		}
		create_artifact = {
			name = vs_firstman_longsword_bronze_name
			visuals = vs_firstman_longsword_bronze_visuals
			description = vs_firstman_longsword_bronze_description
			type = sword
			wealth = scope:wealth
			quality = scope:quality
			template = vs_generic_firstman_template
			modifier = vs_generic_valyrian_modifier
			save_scope_as = newly_created_artifact
			decaying = no
		}
		scope:newly_created_artifact ?= {
			equip_artifact_to_owner_replace = yes
			set_variable = {
				name = valyrian_steel
				value = yes
			}
			set_variable = {
				name = valyrian_steel_generic
				value = yes
			}
		}
	}

	hidden_effect_new_object = {
		scope:newly_created_artifact = {
			add_artifact_history = { 
				location = scope:zz_item_crafter.location
				actor = scope:zz_item_crafter
				recipient = scope:owner
				type = created
			}
			clear_artifact_modifiers = yes
		}
	}
	zz_craft_item_apply_item_effect = {
		MODIFIER = zz_valyria_magic_vs_base_modifier_01_stacking
	}
	zz_apply_item_magic_modifiers_effect = yes 
	trigger_event = zz_valyria_item_crafting_rename.2
}



zz_valyria_create_magic_ring_effect = {

	$OWNER$ = { save_scope_as = owner }
	set_artifact_rarity_illustrious = yes

	save_scope_value_as = {
		name = ring_modifier
		value = flag:$RING_MODIFIER$
	}
	create_artifact = {
		name = zz_valyria_artifact_mages_ring_name_dummy
		description = placeholder
		visuals = zz_valyria_ring
		type = archmaester_ring
		creator = scope:zz_item_crafter
		history = {
			location = scope:zz_item_crafter.location
			actor = scope:zz_item_crafter
			recipient = scope:owner
			type = created
		}
		history = {
			location = scope:zz_item_crafter.location
			actor = scope:zz_item_crafter
			recipient = scope:owner
			type = created
		}
		template = zz_valyria_mages_ring_artifact_template
		modifier = zz_valyria_magic_xp_gain_passive_modifier
		save_scope_as = newly_created_artifact
		wealth = scope:wealth
		quality = scope:quality
		decaying = no
	}

	scope:newly_created_artifact = {
		clear_artifact_modifiers = yes
		set_variable = {
			name = ring_modifier
			value = flag:$RING_MODIFIER$
		}
		set_artifact_name = zz_valyria_artifact_mages_ring_name
		set_artifact_description = zz_valyria_artifact_mages_ring_desc_dummy
		set_variable = {
			name = maesterwork
			value = yes
		}
		add_artifact_history = {
			type = given
			recipient = scope:owner
		}
		equip_artifact_to_owner_replace = yes
	}
	if = { 
		limit = {
			exists = scope:ring_modifier 
		}
		if = { 
			limit = {
				scope:ring_modifier ?= flag:drops_of_power
			}
			zz_craft_item_apply_item_effect = {
				MODIFIER = zz_valyria_magic_mana_gain_modifier_01_stacking
			}
		}
		if = { 
			limit = {
				scope:ring_modifier = flag:all_magic
			}
			zz_craft_item_apply_item_effect = {
				MODIFIER = zz_valyria_magic_xp_gain_modifier_01_stacking
			}
		}
		if = { 
			limit = {
				scope:ring_modifier = flag:higher_mysteries
			}
			zz_craft_item_apply_item_effect = {
				MODIFIER = zz_valyria_higher_mysteries_xp_gain_modifier_01_stacking
			}
		}
		if = { 
			limit = {
				scope:ring_modifier = flag:blood_magic
			}
			zz_craft_item_apply_item_effect = {
				MODIFIER = zz_valyria_blood_magic_xp_gain_modifier_01_stacking
			}
		}
		if = { 
			limit = {
				scope:ring_modifier = flag:shadow_magic
			}
			zz_craft_item_apply_item_effect = {
				MODIFIER = zz_valyria_shadow_magic_xp_gain_modifier_01_stacking
			}
		}
		if = { 
			limit = {
				scope:ring_modifier = flag:dream_magic
			}
			zz_craft_item_apply_item_effect = {
				MODIFIER = zz_valyria_dream_magic_xp_gain_modifier_01_stacking
			}
		}
		if = { 
			limit = {
				scope:ring_modifier = flag:alchemy_magic
			}
			zz_craft_item_apply_item_effect = {
				MODIFIER = zz_valyria_alchemy_magic_xp_gain_modifier_01_stacking
			}
		}
		if = { 
			limit = {
				scope:ring_modifier = flag:fire_magic
			}
			zz_craft_item_apply_item_effect = {
				MODIFIER = zz_valyria_fire_magic_xp_gain_modifier_01_stacking
			}
		}
		if = { 
			limit = {
				scope:ring_modifier = flag:air_magic
			}
			zz_craft_item_apply_item_effect = {
				MODIFIER = zz_valyria_air_magic_xp_gain_modifier_01_stacking
			}
		}
		if = { 
			limit = {
				scope:ring_modifier = flag:water_magic
			}
			zz_craft_item_apply_item_effect = {
				MODIFIER = zz_valyria_water_magic_xp_gain_modifier_01_stacking
			}
		}
	}
	zz_apply_item_magic_modifiers_effect = yes 
	trigger_event = zz_valyria_item_crafting_rename.2
	
}

zz_craft_item_apply_item_effect = {
	set_variable = { 
		name = zz_item_effect 
		value = trait:$MODIFIER$
	}
	if = {
		limit = {
			root = {
				var:zz_item_effect = trait:$MODIFIER$
			}
		}
		scope:newly_created_artifact = {
			while = {
				count = root.zz_valyria_magic_alchemy_magic_crafting_value
				if = { 
					limit = { 
						root = {
							var:zz_item_effect = trait:zz_valyria_magic_xp_gain_passive_modifier
						}
					}
					if = {
						limit = {
							exists = var:item_mana_gain
						}
						change_variable = {
							name = item_mana_gain
							add = 0.25
						}
					}
					else = {
						set_variable = {
							name = item_mana_gain
							value = 0.25
						}
					}
				}
				add_artifact_modifier = $MODIFIER$
			}
		}
	}
}

zz_item_calculate_cost_effect = {
	if = {
		limit = {
			var:zz_selected_item = trait:$ITEM$
		}
		set_variable = {
			name = zz_current_cost_item
			value = $COST$
		}
	}
}
zz_modifier_calculate_effect = {
	if = {
		limit = {
			var:zz_selected_modifier = trait:$MODIFIER$
		}
		set_variable = {
			name = zz_current_cost_modifier
			value = $COST$
		}
	}
}


zz_item_craft_zz_valyria_crafting_vs_sword_01 = {
	zz_valyria_create_vs_sword_effect = {OWNER = root} 
	
}
zz_item_craft_zz_valyria_crafting_dragonbone_bow_01 = {
	agot_create_artifact_dragonbone_longbow_effect = { OWNER = ROOT }
}

zz_item_craft_zz_valyria_crafting_vs_armour_01 = {
	agot_create_artifact_valyrian_steel_armor_effect = { OWNER = root } 
}

zz_item_craft_zz_valyria_crafting_magic_ring_01 = {
	if = { 
		limit = {
			var:zz_ring_selection_ring = trait:zz_valyria_ring_type_09
		}
		zz_valyria_create_magic_ring_effect ={ OWNER = root RING_MODIFIER = drops_of_power   }
	}
	else_if = {
		limit = {
			var:zz_ring_selection_ring = trait:zz_valyria_ring_type_01
		}
		zz_valyria_create_magic_ring_effect ={ OWNER = root RING_MODIFIER = blood_magic   }
	}
	else_if = {
		limit = {
			var:zz_ring_selection_ring = trait:zz_valyria_ring_type_02
		}
		zz_valyria_create_magic_ring_effect ={ OWNER = root RING_MODIFIER = shadow_magic   }
	}
	else_if = {
		limit = {
			var:zz_ring_selection_ring = trait:zz_valyria_ring_type_03
		}
		zz_valyria_create_magic_ring_effect ={ OWNER = root RING_MODIFIER = dream_magic   }
	}
	else_if = {
		limit = {
			var:zz_ring_selection_ring = trait:zz_valyria_ring_type_04
		}
		zz_valyria_create_magic_ring_effect ={ OWNER = root RING_MODIFIER = alchemy_magic   }
	}
	else_if = {
		limit = {
			var:zz_ring_selection_ring = trait:zz_valyria_ring_type_05
		}
		zz_valyria_create_magic_ring_effect ={ OWNER = root RING_MODIFIER = fire_magic   }
	}
	else_if = {
		limit = {
			var:zz_ring_selection_ring = trait:zz_valyria_ring_type_06
		}
		zz_valyria_create_magic_ring_effect ={ OWNER = root RING_MODIFIER = air_magic   }
	}
	else_if = {
		limit = {
			var:zz_ring_selection_ring = trait:zz_valyria_ring_type_07
		}
		zz_valyria_create_magic_ring_effect ={ OWNER = root RING_MODIFIER = water_magic   }
	}
	else_if = {
		limit = {
			var:zz_ring_selection_ring = trait:zz_valyria_ring_type_08
		}
		zz_valyria_create_magic_ring_effect ={ OWNER = root RING_MODIFIER = higher_mysteries   }
	}
	else_if = {
		limit = {
			var:zz_ring_selection_ring = trait:zz_valyria_ring_type_10
		}
		zz_valyria_create_magic_ring_effect ={ OWNER = root RING_MODIFIER = all_magic   }
	}
	
}




zz_item_craft_zz_valyria_crafting_dragon_horn_01 = {
	agot_create_artifact_dragon_horn_effect = { OWNER = root DRAGON = root }
}

zz_item_craft_zz_valyria_crafting_glass_candle_01 = {
	agot_create_random_glass_candle_effect = { OWNER =  root  }
}






zz_craft_item_effect = {
	if = {
		limit = {
			var:zz_selected_item = trait:$ITEM$
		}
		random_list = { 
			65 = { 
				modifier = {
					add = zz_spellcast_value
				}
				zz_item_craft_$ITEM$ = yes 
			}
			35 = { 
				zz_valyria_spell_failure_effect = yes
			}
		}
	}
}

zz_craft_item_apply_modifier_effect = {
	if = {
		limit = {
			root = {
				var:zz_selected_modifier = trait:$MODIFIER$
			}
		}
		scope:newly_created_artifact = {
			while = {
				count = root.zz_valyria_magic_alchemy_magic_crafting_value
				if = { 
					limit = { 
						root = {
							var:zz_selected_modifier = trait:zz_valyria_magic_xp_gain_passive_modifier
						}
					}
					if = {
						limit = {
							exists = var:item_mana_gain
						}
						change_variable = {
							name = item_mana_gain
							add = 0.25
						}
					}
					else = {
						set_variable = {
							name = item_mana_gain
							value = 0.25
						}
					}
				}
				add_artifact_modifier = $MODIFIER$
			}
		}
	}
}

zz_valyria_crafting_calculate_crafting_cost_item_effect = {
	zz_item_calculate_cost_effect = {
		ITEM = zz_valyria_crafting_vs_sword_01
		COST = zz_item_vs_sword_cost
	}
	zz_item_calculate_cost_effect = {
		ITEM = zz_valyria_crafting_dragonbone_bow_01
		COST = zz_item_dragonbone_bow_cost
	}
	zz_item_calculate_cost_effect = {
		ITEM = zz_valyria_crafting_vs_armour_01
		COST = zz_item_vs_armour_cost
	}

	zz_item_calculate_cost_effect = {
		ITEM = zz_valyria_crafting_magic_ring_01
		COST = zz_item_vs_ring_cost
	}

	zz_item_calculate_cost_effect = {
		ITEM = zz_valyria_crafting_glass_candle_01
		COST = zz_item_glass_candle_cost
	}
	zz_item_calculate_cost_effect = {
		ITEM = zz_valyria_crafting_dragon_horn_01
		COST = zz_item_dragon_horn_cost
	}

	
}

zz_valyria_crafting_calculate_crafting_cost_modifier_effect = {
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_none_modifier_01_stacking
		COST = zz_no_modifer_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_mana_gain_modifier_01_stacking
		COST = zz_modifier_dop_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_xp_gain_modifier_01_stacking
		COST = zz_modifier_magic_xp_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_higher_mysteries_xp_gain_modifier_01_stacking
		COST = zz_modifier_higher_mysteries_xp_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_blood_magic_xp_gain_modifier_01_stacking
		COST = zz_modifier_blood_magic_xp_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_shadow_magic_xp_gain_modifier_01_stacking
		COST = zz_modifier_shadow_magic_xp_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_dream_magic_xp_gain_modifier_01_stacking
		COST = zz_modifier_dream_magic_xp_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_alchemy_magic_xp_gain_modifier_01_stacking
		COST = zz_modifier_alchemy_magic_xp_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_fire_magic_xp_gain_modifier_01_stacking
		COST = zz_modifier_fire_magic_xp_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_air_magic_xp_gain_modifier_01_stacking
		COST = zz_modifier_air_magic_xp_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_water_magic_xp_gain_modifier_01_stacking
		COST = zz_modifier_water_magic_xp_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_xp_gain_passive_modifier
		COST = zz_modifier_passive_dop_xp_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_learning_modifier_01_stacking
		COST = zz_modifier_learning_add_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_diplomacy_modifier_01_stacking
		COST = zz_modifier_diplomacy_add_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_stewardship_modifier_01_stacking
		COST = zz_modifier_stewardship_add_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_martial_modifier_01_stacking
		COST = zz_modifier_martial_add_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_intrigue_modifier_01_stacking
		COST = zz_modifier_intrigue_add_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_prowess_modifier_01_stacking
		COST = zz_modifier_prowess_add_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_diplomacy_range_modifier_01_stacking
		COST = zz_modifier_diplomacy_range_mult_cost
	}

	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_tax_mult_modifier_01_stacking
		COST = zz_modifier_diplomacy_range_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_gold_income_modifier_01_stacking
		COST = zz_modifier_diplomacy_range_mult_cost
	}
	zz_modifier_calculate_effect = {
		MODIFIER = zz_valyria_magic_income_mult_modifier_01_stacking
		COST = zz_modifier_diplomacy_range_mult_cost
	}
}

zz_valyria_crafting_item_construct_effect = {
	if = {
		limit = {
			var:zz_selected_item = trait:zz_valyria_crafting_vs_sword_01
		}
		zz_craft_item_effect = {
			ITEM = zz_valyria_crafting_vs_sword_01
		} 
	}

	else_if = {
		limit = {
			var:zz_selected_item = trait:zz_valyria_crafting_dragonbone_bow_01
		}
		zz_craft_item_effect = {
			ITEM = zz_valyria_crafting_dragonbone_bow_01
		}
		zz_apply_item_magic_modifiers_effect = yes 
	}
	else_if = {
		limit = {
			var:zz_selected_item = trait:zz_valyria_crafting_vs_armour_01
		}
		zz_craft_item_effect = {
			ITEM = zz_valyria_crafting_vs_armour_01
		}
		zz_apply_item_magic_modifiers_effect = yes 
	}
	else_if = {
		limit = {
			var:zz_selected_item = trait:zz_valyria_crafting_magic_ring_01
		}
		zz_craft_item_effect = {
			ITEM = zz_valyria_crafting_magic_ring_01
		}
		zz_apply_item_magic_modifiers_effect = yes 
	}
	else_if = {
		limit = {
			var:zz_selected_item = trait:zz_valyria_crafting_glass_candle_01
		}
		zz_craft_item_effect = {
			ITEM = zz_valyria_crafting_glass_candle_01
		}
		zz_apply_item_magic_modifiers_effect = yes 
	}
	else_if = {
		limit = {
			var:zz_selected_item = trait:zz_valyria_crafting_dragon_horn_01
		}
		zz_craft_item_effect = {
			ITEM = zz_valyria_crafting_dragon_horn_01
		}
		zz_apply_item_magic_modifiers_effect = yes 
	}

	scope:newly_created_artifact ?= { 
		set_variable = {
			name = zz_crafted
			value = yes
		}
	}

}



zz_apply_item_magic_modifiers_effect = {
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_mana_gain_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_xp_gain_modifier_01_stacking
	}
		zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_higher_mysteries_xp_gain_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_blood_magic_xp_gain_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_shadow_magic_xp_gain_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_dream_magic_xp_gain_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_alchemy_magic_xp_gain_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_fire_magic_xp_gain_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_air_magic_xp_gain_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_water_magic_xp_gain_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_xp_gain_passive_modifier
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_learning_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_diplomacy_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_stewardship_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_martial_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_intrigue_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_prowess_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_diplomacy_range_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_tax_mult_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_gold_income_modifier_01_stacking
	}
	zz_craft_item_apply_modifier_effect = {
		MODIFIER = zz_valyria_magic_income_mult_modifier_01_stacking
	}
}


zz_craft_item_cost_effect = {
	if = {
		limit = {
			var:zz_current_magic_reagent ?= flag:mages_power
		}
		var:zz_item_crafter ?= {
			set_variable = {
				name = zz_manacost 
				value = zz_valyria_mana_cost
			}
			zz_valyria_mana_spend = yes
		}
	}
	if = {
		limit = {
			var:zz_current_magic_reagent ?= flag:human_sacrifice
		}
		trigger_event = zz_valyria_item_crafting_human_sacrifice.01 
	}
	remove_short_term_gold = zz_valyria_current_cost


}